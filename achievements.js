const achievements = [
    {
        name: 'First',
        isUnlocked: false,
        hoverText: 'click achievements button',
        img: 'imgs/achievements/number_1.jpg',
    },
    {
        name: 'Settings',
        isUnlocked: false,
        hoverText: 'click settings button',
        img: 'imgs/achievements/settings.jpg',
    },
    {
        name: 'Hall of Knowledge',
        isUnlocked: false,
        hoverText: 'try to learn something',
        img: 'imgs/achievements/hall_of_knowledge.jpg',
    },
    {
        name: 'How to Play',
        isUnlocked: false,
        hoverText: 'review the game manual',
        img: 'imgs/achievements/game_manual.jpg',
    },
    {
        name: 'Grasshopper',
        isUnlocked: false,
        hoverText: 'buy some upgrades',
        img: 'imgs/achievements/grasshopper.jpg',
    },
    {
        name: 'First Prestige',
        isUnlocked: false,
        hoverText: 'click some button',
        img: 'imgs/achievements/first_prestige.jpg',
    },
    {
        name: 'Click the Clicker',
        isUnlocked: false,
        hoverText: 'you can click on purchased upgrades',
        img: 'imgs/achievements/click_the_clicker.jpg',
    },
    {
        name: 'Cookie Clicker',
        isUnlocked: false,
        hoverText: 'some upgrades unlock new mechanics',
        img: 'imgs/achievements/cookie_clicker.jpg',
    },
    {
        name: 'First Ascension',
        isUnlocked: false,
        hoverText: 'become a low level god',
        img: 'imgs/achievements/ascension.jpg',
    },
    {
        name: 'Stay Ugly',
        isUnlocked: false,
        hoverText: 'excuse me?',
        img: 'imgs/achievements/stay_ugly.jpg',
    },
    {
        name: 'Big Brain Move',
        isUnlocked: false,
        hoverText: 'pay attention to upgrade resources',
        img: 'imgs/achievements/brain.jpg',
    },
    {
        name: 'Clarity',
        isUnlocked: false,
        hoverText: 'reach -1T delusion',
        img: 'imgs/achievements/clarity.jpg',
    },
    {
        name: 'Now we are Progressing',
        isUnlocked: false,
        hoverText: 'why only ascend one upgrade at a time?',
        img: 'imgs/achievements/double_ascension.jpg',
    },
    {
        name: 'Get Rick Rolled',
        isUnlocked: false,
        hoverText: 'try to finish the game',
        img: 'imgs/achievements/rick_roll.jpg',
    },
    {
        name: 'Speed Demon',
        isUnlocked: false,
        hoverText: 'score over 3 points per second in speed game',
        img: 'imgs/achievements/speed_demon.jpg',
    },
    {
        name: 'Memory Master',
        isUnlocked: false,
        hoverText: 'win a memory game with 6x6 grid and sequence of 6',
        img: 'imgs/achievements/memory_master.jpg',
    },
    {
        name: 'Math Genius',
        isUnlocked: false,
        hoverText: 'win math game with target over 83',
        img: 'imgs/achievements/math_genius.jpg',
    },
    {
        name: 'Pure Luck',
        isUnlocked: false,
        hoverText: 'get over 124% return from lucky box',
        img: 'imgs/achievements/pure_luck.jpg',
    },
    {
        name: 'Build a Base',
        isUnlocked: false,
        hoverText: 'do what it says',
        img: 'imgs/achievements/build_a_base.jpg',
    },
    {
        name: 'Power Unlocked',
        isUnlocked: false,
        hoverText: 'unlock the 7th resource',
        img: 'imgs/achievements/power_unlocked.jpg',
    },
    {
        name: 'Fifth',
        isUnlocked: false,
        hoverText: 'keep clicking achievements button',
        img: 'imgs/achievements/number_5.jpg',
    },
    {
        name: 'Burn the World',
        isUnlocked: false,
        hoverText: 'past the point of no return',
        img: 'imgs/achievements/mosquitos.jpg',
    },
    {
        name: 'Fatigued Finger',
        isUnlocked: false,
        hoverText: '500 clicks on cookie',
        img: 'imgs/achievements/fatigued_finger.jpg',
    },
    {
        name: 'All In',
        isUnlocked: false,
        hoverText: 'this achievement is related to the trade function',
        img: 'imgs/achievements/all_in.jpg',
    },
    {
        name: 'Does Not Exist 23',
        isUnlocked: false,
        hoverText: 'Does not exist yet',
        img: 'imgs/achievements/uninitialized.jpg',
    },
    {
        name: 'Big Crunch',
        isUnlocked: false,
        hoverText: 'just another prestige layer',
        img: 'imgs/achievements/big_crunch.jpg',
    },
    {
        name: 'Does Not Exist 25',
        isUnlocked: false,
        hoverText: 'Does not exist yet',
        img: 'imgs/achievements/uninitialized.jpg',
    },
    {
        name: 'Does Not Exist 26',
        isUnlocked: false,
        hoverText: 'Does not exist yet',
        img: 'imgs/achievements/uninitialized.jpg',
    },
    {
        name: 'Do-Over',
        isUnlocked: false,
        hoverText: 'if only there was a way to undo mistakes',
        img: 'imgs/achievements/do_over.jpg',
    },
    {
        name: 'Buy the Map',
        isUnlocked: false,
        hoverText: 'maybe pay some knowledge for it',
        img: 'imgs/achievements/map_to_power.jpg',
    },
    {
        name: 'Does Not Exist 28',
        isUnlocked: false,
        hoverText: 'Does not exist yet',
        img: 'imgs/achievements/uninitialized.jpg',
    },
    {
        name: 'Transcend',
        isUnlocked: false,
        hoverText: 'become a god in a parallel universe',
        img: 'imgs/achievements/transcendence.jpg',
    },
    {
        name: 'Does Not Exist 30',
        isUnlocked: false,
        hoverText: 'Does not exist yet',
        img: 'imgs/achievements/uninitialized.jpg',
    },
    {
        name: 'Does Not Exist 31',
        isUnlocked: false,
        hoverText: 'Does not exist yet',
        img: 'imgs/achievements/uninitialized.jpg',
    },
    {
        name: 'Does Not Exist 32',
        isUnlocked: false,
        hoverText: 'Does not exist yet',
        img: 'imgs/achievements/uninitialized.jpg',
    },
    {
        name: 'Does Not Exist 33',
        isUnlocked: false,
        hoverText: 'Does not exist yet',
        img: 'imgs/achievements/uninitialized.jpg',
    },
    {
        name: 'Max Automation',
        isUnlocked: false,
        hoverText: 'turn up your automation setting',
        img: 'imgs/achievements/max_automation.jpg',
    },
    {
        name: 'Over 9000',
        isUnlocked: false,
        hoverText: 'prestige for over 9000 mult',
        img: 'imgs/achievements/over_9000.jpg',
    },
    {
        name: 'Discord',
        isUnlocked: false,
        hoverText: 'join the Discord',
        img: 'imgs/achievements/discord.jpg',
    },
    {
        name: 'Precision Buying',
        isUnlocked: false,
        hoverText: 'let me do this myself',
        img: 'imgs/achievements/precision_buying.jpg',
    },
    {
        name: 'Begin Training',
        isUnlocked: false,
        hoverText: 'use that power for something',
        img: 'imgs/achievements/begin_training.jpg',
    },
    {
        name: 'Does Not Exist 39',
        isUnlocked: false,
        hoverText: 'Does not exist yet',
        img: 'imgs/achievements/uninitialized.jpg',
    },
    {
        name: 'Mortal Kombat',
        isUnlocked: false,
        hoverText: 'I only know Scorpion',
        img: 'imgs/achievements/mortal_kombat.jpg',
    },
    {
        name: 'Enter Hall of Power',
        isUnlocked: false,
        hoverText: 'so there is more than one Hall',
        img: 'imgs/achievements/hall_of_power.jpg',
    },
    {
        name: 'Does Not Exist 42',
        isUnlocked: false,
        hoverText: 'Does not exist yet',
        img: 'imgs/achievements/uninitialized.jpg',
    },
    {
        name: 'Going in Blind',
        isUnlocked: false,
        hoverText: 'get far without knowing how to play?',
        img: 'imgs/achievements/going_in_blind.jpg',
    },
    {
        name: 'Remember Trading?',
        isUnlocked: false,
        hoverText: 'you can buy hopium with copium',
        img: 'imgs/achievements/trading.jpg',
    },
    {
        name: 'Does Not Exist 46',
        isUnlocked: false,
        hoverText: 'Does not exist yet',
        img: 'imgs/achievements/uninitialized.jpg',
    },
    {
        name: 'Does Not Exist 47',
        isUnlocked: false,
        hoverText: 'Does not exist yet',
        img: 'imgs/achievements/uninitialized.jpg',
    },
    {
        name: 'Does Not Exist 48',
        isUnlocked: false,
        hoverText: 'Does not exist yet',
        img: 'imgs/achievements/uninitialized.jpg',
    },
    {
        name: 'Does Not Exist 49',
        isUnlocked: false,
        hoverText: 'Does not exist yet',
        img: 'imgs/achievements/uninitialized.jpg',
    },
    {
        name: 'Chuck Norris Kidney',
        isUnlocked: false,
        hoverText: 'Find a way to distract Chuck Norris',
        img: 'imgs/achievements/chuck_norris_kidney.jpg',
    },
    {
        name: 'Does Not Exist 50',
        isUnlocked: false,
        hoverText: 'Does not exist yet',
        img: 'imgs/achievements/uninitialized.jpg',
    },
    {
        name: 'Does Not Exist 51',
        isUnlocked: false,
        hoverText: 'Does not exist yet',
        img: 'imgs/achievements/uninitialized.jpg',
    },
    {
        name: 'Nebula Overdrive',
        isUnlocked: false,
        hoverText: 'Why spend power?',
        img: 'imgs/achievements/nebula_overdrive.jpg',
    },
    {
        name: 'Outsmart Vegeta SS God',
        isUnlocked: false,
        hoverText: 'pay attention to fight log',
        img: 'imgs/achievements/ss_smart_1.jpg',
    },
    {
        name: 'Outsmart Vegeta SS Eternal',
        isUnlocked: false,
        hoverText: 'pay attention to fight log',
        img: 'imgs/achievements/ss_smart_2.jpg',
    },
    {
        name: 'Raw Power',
        isUnlocked: false,
        hoverText: 'who needs smarts, when you have power',
        img: 'imgs/achievements/vegeta_power.jpg',
    },
    {
        name: 'That is some Bad Luck',
        isUnlocked: false,
        hoverText: 'keep playing Luck Game until it happens',
        img: 'imgs/achievements/very_unlucky.jpg',
    },
    {
        name: 'Stellar Harvester',
        isUnlocked: false,
        hoverText: 'get stellar harvest multiplier over 50x',
        img: 'imgs/achievements/stellar_harvester.jpg',
    },
    {
        name: 'Overkill Much?',
        isUnlocked: false,
        hoverText: 'send him flying out of the matrix',
        img: 'imgs/achievements/out_of_the_matrix.jpg',
    },
    {
        name: 'Save the Multiverse',
        isUnlocked: false,
        hoverText: 'someone wants to destroy the multiverse - STOP THEM!',
        img: 'imgs/achievements/save_the_multiverse.jpg',
    },
    {
        name: 'Does Not Exist 63',
        isUnlocked: false,
        hoverText: 'Does not exist yet',
        img: 'imgs/achievements/uninitialized.jpg',
    },
    {
        name: 'Does Not Exist 64',
        isUnlocked: false,
        hoverText: 'Does not exist yet',
        img: 'imgs/achievements/uninitialized.jpg',
    },
    {
        name: 'Does Not Exist 65',
        isUnlocked: false,
        hoverText: 'Does not exist yet',
        img: 'imgs/achievements/uninitialized.jpg',
    },
    {
        name: 'Does Not Exist 66',
        isUnlocked: false,
        hoverText: 'Does not exist yet',
        img: 'imgs/achievements/uninitialized.jpg',
    },
    {
        name: 'Does Not Exist 67',
        isUnlocked: false,
        hoverText: 'Does not exist yet',
        img: 'imgs/achievements/uninitialized.jpg',
    },
    {
        name: 'Does Not Exist 68',
        isUnlocked: false,
        hoverText: 'Does not exist yet',
        img: 'imgs/achievements/uninitialized.jpg',
    },
    {
        name: 'Does Not Exist 69',
        isUnlocked: false,
        hoverText: 'Does not exist yet',
        img: 'imgs/achievements/uninitialized.jpg',
    },
    {
        name: 'Does Not Exist 70',
        isUnlocked: false,
        hoverText: 'Does not exist yet',
        img: 'imgs/achievements/uninitialized.jpg',
    },
    {
        name: 'Does Not Exist 71',
        isUnlocked: false,
        hoverText: 'Does not exist yet',
        img: 'imgs/achievements/uninitialized.jpg',
    },
    {
        name: 'Does Not Exist 72',
        isUnlocked: false,
        hoverText: 'Does not exist yet',
        img: 'imgs/achievements/uninitialized.jpg',
    },
    {
        name: 'Does Not Exist 73',
        isUnlocked: false,
        hoverText: 'Does not exist yet',
        img: 'imgs/achievements/uninitialized.jpg',
    },
    {
        name: 'Does Not Exist 74',
        isUnlocked: false,
        hoverText: 'Does not exist yet',
        img: 'imgs/achievements/uninitialized.jpg',
    },
    {
        name: 'Does Not Exist 75',
        isUnlocked: false,
        hoverText: 'Does not exist yet',
        img: 'imgs/achievements/uninitialized.jpg',
    },
    {
        name: 'Does Not Exist 76',
        isUnlocked: false,
        hoverText: 'Does not exist yet',
        img: 'imgs/achievements/uninitialized.jpg',
    },
    {
        name: 'Does Not Exist 77',
        isUnlocked: false,
        hoverText: 'Does not exist yet',
        img: 'imgs/achievements/uninitialized.jpg',
    },
    {
        name: 'Does Not Exist 78',
        isUnlocked: false,
        hoverText: 'Does not exist yet',
        img: 'imgs/achievements/uninitialized.jpg',
    },
    {
        name: 'Does Not Exist 79',
        isUnlocked: false,
        hoverText: 'Does not exist yet',
        img: 'imgs/achievements/uninitialized.jpg',
    },
    {
        name: 'Does Not Exist 80',
        isUnlocked: false,
        hoverText: 'Does not exist yet',
        img: 'imgs/achievements/uninitialized.jpg',
    },
    {
        name: 'Does Not Exist 81',
        isUnlocked: false,
        hoverText: 'Does not exist yet',
        img: 'imgs/achievements/uninitialized.jpg',
    },
    {
        name: 'Does Not Exist 82',
        isUnlocked: false,
        hoverText: 'Does not exist yet',
        img: 'imgs/achievements/uninitialized.jpg',
    },
    {
        name: 'Does Not Exist 83',
        isUnlocked: false,
        hoverText: 'Does not exist yet',
        img: 'imgs/achievements/uninitialized.jpg',
    },
    {
        name: 'Does Not Exist 84',
        isUnlocked: false,
        hoverText: 'Does not exist yet',
        img: 'imgs/achievements/uninitialized.jpg',
    },
    {
        name: 'Does Not Exist 85',
        isUnlocked: false,
        hoverText: 'Does not exist yet',
        img: 'imgs/achievements/uninitialized.jpg',
    },
    {
        name: 'Does Not Exist 86',
        isUnlocked: false,
        hoverText: 'Does not exist yet',
        img: 'imgs/achievements/uninitialized.jpg',
    },
    {
        name: 'Does Not Exist 87',
        isUnlocked: false,
        hoverText: 'Does not exist yet',
        img: 'imgs/achievements/uninitialized.jpg',
    },
    {
        name: 'Does Not Exist 88',
        isUnlocked: false,
        hoverText: 'Does not exist yet',
        img: 'imgs/achievements/uninitialized.jpg',
    },
    {
        name: 'Does Not Exist 89',
        isUnlocked: false,
        hoverText: 'Does not exist yet',
        img: 'imgs/achievements/uninitialized.jpg',
    },
    {
        name: 'Does Not Exist 90',
        isUnlocked: false,
        hoverText: 'Does not exist yet',
        img: 'imgs/achievements/uninitialized.jpg',
    },
    {
        name: 'The Tiniest Crunch',
        isUnlocked: false,
        hoverText: '???',
        img: 'imgs/achievements/tiniest_crunch.jpg',
    },
    {
        name: 'Does Not Exist 92',
        isUnlocked: false,
        hoverText: 'Does not exist yet',
        img: 'imgs/achievements/uninitialized.jpg',
    },
    {
        name: 'Does Not Exist 93',
        isUnlocked: false,
        hoverText: 'Does not exist yet',
        img: 'imgs/achievements/uninitialized.jpg',
    },
    {
        name: 'Rasta Deadpool',
        isUnlocked: false,
        hoverText: '???',
        img: 'imgs/achievements/rasta_deadpool.jpg',
    },
    {
        name: 'Does Not Exist 95',
        isUnlocked: false,
        hoverText: 'Does not exist yet',
        img: 'imgs/achievements/uninitialized.jpg',
    },
    {
        name: 'PigeonPost',
        isUnlocked: false,
        hoverText: '???',
        img: 'imgs/achievements/pigeonpost.jpg',
    },
    {
        name: 'Does Not Exist 97',
        isUnlocked: false,
        hoverText: 'Does not exist yet',
        img: 'imgs/achievements/uninitialized.jpg',
    },
    {
        name: 'Fidget Clicks',
        isUnlocked: false,
        hoverText: '???',
        img: 'imgs/achievements/fidget_clicks.jpg',
    },
    {
        name: 'Does Not Exist 99',
        isUnlocked: false,
        hoverText: 'Does not exist yet',
        img: 'imgs/achievements/uninitialized.jpg',
    },
    {
        name: 'Does Not Exist 100',
        isUnlocked: false,
        hoverText: 'Does not exist yet',
        img: 'imgs/achievements/uninitialized.jpg',
    },
];

const achievementsMap = new Map();

achievements.forEach(achievement => {
    achievementsMap.set(achievement.name, achievement);
});

// Function to render achievements grid
function renderAchievements() {
    const container = document.getElementById('achievements-grid');
    container.innerHTML = ''; // Clear any existing content

    achievementsMap.forEach(achievement => { // Iterate over the map
        const achievementElement = document.createElement('div');
        achievementElement.className = 'achievement';
        if (achievement.isUnlocked) {
            achievementElement.classList.add('unlocked');
        }

        const img = document.createElement('img');
        img.src = achievement.img; // Ensure the image paths match this format

        const hoverText = document.createElement('div');
        hoverText.className = 'hover-text';
        hoverText.innerHTML = `<strong>${achievement.name}</strong><br>Tip: ${achievement.hoverText}`;

        achievementElement.appendChild(img);
        achievementElement.appendChild(hoverText);
        container.appendChild(achievementElement);
    });

    updateAchievementsInfo();
}

let numAchievementsOpens = 0;
// Function to show the achievements overlay
function showAchievementsOverlay() {
    const overlay = document.getElementById('achievementsOverlay');
    overlay.style.display = 'flex'; // Show the overlay and center it
    unlockAchievement('First');
    numAchievementsOpens++;
    if (numAchievementsOpens==5){
        unlockAchievement('Fifth');
    }
    renderAchievements(); // Render the achievements grid inside the overlay
}

// Function to update the achievements info
function updateAchievementsInfo() {
    let totalCount = 0;

    achievementsMap.forEach(achievement => {
        if (!achievement.name.startsWith("Does Not Exist")) {
            totalCount++;
        }
    });

    const infoElement = document.getElementById('achievements-info');
    infoElement.textContent = `Achievements Unlocked: ${numUnlockedAchievements}/${totalCount} | Multiplier: ${achievementMultiplier.toFixed(2)}x`;
}

// Function to unlock an achievement
function unlockAchievement(name, duringLoad = false) {
    const achievement = achievementsMap.get(name); // Access the achievement directly from the map
    if (achievement && !achievement.isUnlocked) {
        achievement.isUnlocked = true;
        numUnlockedAchievements = Array.from(achievementsMap.values()).filter(ach => ach.isUnlocked).length; // Recalculate the number of unlocked achievements
        achievementMultiplier = 1 + (0.01 * numUnlockedAchievements)

        if (!duringLoad) {
            renderAchievements(); // Re-render achievements after unlocking
            updateMultipliersDisplay();
            showPopupTooltip(`Unlocked Achievement: ${name}`, color='#1B4D3E', durationSeconds=5);
        }
    }
}

function closeAchievementsOverlay() {
    const overlay = document.getElementById('achievementsOverlay');
    overlay.style.display = 'none';
}

document.addEventListener('DOMContentLoaded', () => {
    // Event listener to open the achievements overlay when the button is clicked
    document.getElementById('achievementsButton').addEventListener('click', showAchievementsOverlay);

    // Event listener for close buttons
    document.getElementById('closeAchievementsOverlay').addEventListener('click', closeAchievementsOverlay);
    document.getElementById('closeAchievementsButton').addEventListener('click', closeAchievementsOverlay);

    // Event listener to close overlay when clicking outside the modal content
    document.getElementById('achievementsOverlay').addEventListener('click', (event) => {
        if (event.target === document.getElementById('achievementsOverlay')) {
            closeAchievementsOverlay();
        }
    });

    // Optional: Render achievements immediately if needed
    // renderAchievements();
});
